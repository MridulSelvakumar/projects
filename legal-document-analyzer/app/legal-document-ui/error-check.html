<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error Check</title>
    <script
        id="sap-ui-bootstrap"
        src="https://ui5.sap.com/1.120.0/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-libs="sap.m,sap.tnt"
        data-sap-ui-compatVersion="edge"
        data-sap-ui-async="true">
    </script>
    
    <style>
        .error-display {
            background: #ffebee;
            border: 1px solid #f44336;
            padding: 1rem;
            margin: 1rem;
            border-radius: 4px;
            font-family: monospace;
        }
        .loading {
            padding: 2rem;
            text-align: center;
            font-size: 1.2rem;
        }
    </style>
</head>
<body class="sapUiBody">
    <div id="loading" class="loading">Loading UI5...</div>
    <div id="content"></div>
    <div id="errors"></div>
    
    <script>
        // Catch all errors
        window.onerror = function(msg, url, line, col, error) {
            document.getElementById("errors").innerHTML += 
                '<div class="error-display">Error: ' + msg + '<br>Line: ' + line + '</div>';
            return false;
        };
        
        console.log("Starting...");
        document.getElementById("loading").innerHTML = "UI5 Bootstrap loading...";
        
        sap.ui.getCore().attachInit(function() {
            console.log("UI5 initialized");
            document.getElementById("loading").innerHTML = "UI5 initialized, loading modules...";
            
            try {
                sap.ui.require([
                    "sap/m/App",
                    "sap/m/Page",
                    "sap/m/Text",
                    "sap/m/Button",
                    "sap/m/VBox",
                    "sap/m/Panel",
                    "sap/tnt/ToolPage",
                    "sap/tnt/SideNavigation",
                    "sap/tnt/NavigationList",
                    "sap/tnt/NavigationListItem"
                ], function(App, Page, Text, Button, VBox, Panel, ToolPage, SideNavigation, NavigationList, NavigationListItem) {
                    
                    console.log("Modules loaded");
                    document.getElementById("loading").innerHTML = "Modules loaded, creating app...";
                    
                    try {
                        var app = new App({
                            id: "testApp"
                        });
                        
                        var toolPage = new ToolPage({
                            header: new sap.m.Bar({
                                contentLeft: [
                                    new Text({
                                        text: "Legal Document Analyzer"
                                    })
                                ]
                            }),
                            
                            sideContent: new SideNavigation({
                                item: new NavigationList({
                                    items: [
                                        new NavigationListItem({
                                            text: "Test Item",
                                            icon: "sap-icon://upload"
                                        })
                                    ]
                                })
                            }),
                            
                            mainContents: [
                                new VBox({
                                    items: [
                                        new Text({
                                            text: "Main content area working!"
                                        }),
                                        new Button({
                                            text: "Test Button",
                                            press: function() {
                                                alert("Button works!");
                                            }
                                        })
                                    ]
                                })
                            ]
                        });
                        
                        app.addPage(new Page({
                            content: [toolPage]
                        }));
                        
                        app.placeAt("content");
                        document.getElementById("loading").style.display = "none";
                        console.log("App rendered successfully");
                        
                    } catch (error) {
                        console.error("Error creating app:", error);
                        document.getElementById("errors").innerHTML += 
                            '<div class="error-display">App Creation Error: ' + error.message + '</div>';
                    }
                });
                
            } catch (error) {
                console.error("Error in require:", error);
                document.getElementById("errors").innerHTML += 
                    '<div class="error-display">Require Error: ' + error.message + '</div>';
            }
        });
    </script>
</body>
</html>
